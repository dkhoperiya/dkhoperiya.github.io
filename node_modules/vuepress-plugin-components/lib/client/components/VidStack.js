import{useLocaleConfig as p,isString as i,isArray as d}from"@vuepress/helper/client";import{VidstackPlayerLayout as c,VidstackPlayer as m}from"vidstack/global/player";import{defineComponent as u,ref as y,onMounted as f,onBeforeUnmount as S,h as g}from"vue";import{g as s}from"../getLink-DBmDl_2w.js";import"vidstack/player/styles/default/theme.css";import"vidstack/player/styles/default/layouts/audio.css";import"vidstack/player/styles/default/layouts/video.css";import"../styles/vidstack.scss";import"vuepress/client";var k=u({name:"VidStack",props:{src:{type:[String,Array,Object],required:!0},tracks:{type:Array,default:()=>[]},poster:{type:String,default:""},thumbnails:{type:String,default:""},title:{type:String,default:""},player:{type:Object,default:()=>({})},layout:{type:Object,default:()=>({})},darkmode:Boolean},setup(r){const o=y(),l=p(VIDSTACK_LOCALES);let e=null;return f(async()=>{const a={target:o.value,crossOrigin:!0,poster:r.poster,title:r.title,...r.player,layout:new c({colorScheme:r.darkmode?"dark":"light",thumbnails:r.thumbnails,translations:l.value,...r.layout})};a.src=i(r.src)?s(r.src):d(r.src)?r.src.map(t=>i(t)?s(t):t):r.src,r.tracks.length&&(a.tracks=r.tracks),e=await m.create(a),e.addEventListener("provider-change",()=>{const t=e.provider;t?.type==="hls"&&HLS_JS_INSTALLED?t.library=()=>import("hls.js/dist/hls.min.js"):t?.type==="dash"&&DASHJS_INSTALLED&&(t.library=()=>import("dashjs").then(({default:n})=>({default:n.MediaPlayer})))})}),S(()=>{e?.destroy()}),()=>g("div",{ref:o})}});export{k as default};
//# sourceMappingURL=VidStack.js.map
