import{isString as s,isArray as p}from"@vuepress/helper/client";import{PlyrLayout as n,VidstackPlayer as y}from"vidstack/global/player";import{defineComponent as c,shallowRef as m,onMounted as u,onBeforeUnmount as d,h as f}from"vue";import"vidstack/player/styles/base.css";import"vidstack/player/styles/plyr/theme.css";import"../styles/video-player.scss";import{g as l}from"../getLink-DBmDl_2w.js";import"vuepress/client";var g=c({name:"VideoPlayer",props:{src:{type:[String,Array,Object],required:!0},tracks:{type:Array,default:()=>[]},poster:{type:String,default:""},thumbnails:{type:String,default:""},title:{type:String,default:""},player:{type:Object,default:()=>({})},layout:{type:Object,default:()=>({})}},setup(r){const i=m();let a=null;return u(async()=>{const o={target:i.value,crossOrigin:!0,poster:r.poster,title:r.title,...r.player,layout:new n({thumbnails:r.thumbnails,...r.layout})};o.src=s(r.src)?l(r.src):p(r.src)?r.src.map(t=>s(t)?l(t):t):r.src,r.tracks.length&&(o.tracks=r.tracks),a=await y.create(o),a.addEventListener("provider-change",t=>{const e=t.detail;e?.type==="hls"&&HLS_JS_INSTALLED?e.library=()=>import("hls.js/dist/hls.min.js"):e?.type==="dashjs"&&DASHJS_INSTALLED&&(e.library=()=>import("dashjs"))})}),d(()=>{a?.destroy()}),()=>f("div",{ref:i})}});export{g as default};
//# sourceMappingURL=VideoPlayer.js.map
